<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Acme&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Acme|Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../CSS/style.css">
    <link rel="stylesheet" href="../CSS/footer.css">
    <link rel="stylesheet" href="../CSS/navBar.css">
    <link rel="stylesheet" href="../CSS/toast.css">
    <link rel="stylesheet" href="../CSS/subscribeEditorModification.css">
    <title>Modification de votre inscription</title>
    <script>
        var hasSubscribe = "[[${hasSubscribe}]]";
    </script>
</head>
<body>
	<header th:replace="navBar.html :: top"></header>
    <main>
        <section class="container-fluid" id="myRegistration">
	        <div class="row justify-content-center">
	        	<h1 class="col-12 text-center mb-5 mt-3">Modification de mes informations d'incription</h1>
	        </div>
            <div class="container containerTitleStyle">
                <h2 id="infos" class="col-sm-12 p-0 mb-4 title">Mes informations générales</h2>
            </div>
            <form method="post" action="/updateEditorRegistration" class="border m-3 p-3 p-4 col-sm-10 col-lg-7 mx-auto th:" th:object="${registration}">
                <input type="hidden" name="eventId" th:value="${event.id}" disabled>
                <input type="hidden" id="pricePerTable" name="pricePerTable" th:value="${event.pricePerTable}" disabled>
                <input type="hidden" id="saleOptionPrice" name="saleOptionPrice" th:value="${event.saleOptionPrice}" disabled>
                <input type="hidden" id="maxTablesPerEditor" name="maxTablesPerEditor" th:value="${event.maxTablesPerEditor}" disabled>
                <input type="hidden" id="userId" name="userId" th:value="${connectedUser.id}" disabled>
				<input type="hidden" id="registrationId" name="id" th:value="${registration.id}" />
                <div class="form-group">
                    <label for="tablesQuantity" th:text="|Nombre de tables souhaitées (${registration.event?.maxTablesPerEditor} max.) :|">Nombre de tables souhaitées :</label>
                    <input type="number" id="tablesQuantity" class="form-control w-25" name="tablesQuantity" th:value="${registration.tablesQuantity}">
                    <div id="table_error" class="table_error"></div>
                </div>
                <div class="form-group">
                    <label for="electricalSupplyNeed">Besoin d'un raccord au réseau éléctrique :</label>
                    <div>
                        <label class="switch">
                            <input type="checkbox" id="electricalSupplyNeed" name="electricalSupplyNeed" th:checked="${registration.electricalSupplyNeed}">
                            <span class="slider round"></span>
                            <div class="switch_on">OUI</div>
                            <div class="switch_off">NON</div>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="saleOption">Souhaitez-vous vendre des produits lors de l'évènement ?</label>
                    <div class="m-auto">
                        <label class="switch">
                            <input type="checkbox" id="saleOption" class="saleOption" name="saleOption" th:checked="${registration.saleOption}">
                            <span class="slider round"></span>
                            <div class="switch_on">OUI</div>
                            <div class="switch_off">NON</div>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <div>
                        <label for="agent">Des représentants de votre entreprise seront-ils présents ?</label>
                    </div>
                    <div>
                        <label class="switch">
                            <input type="checkbox" id="agent" name="agentProvided" th:checked="${registration.agentProvided}">
                            <span class="slider round"></span>
                            <div class="switch_on">OUI</div>
                            <div class="switch_off">NON</div>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="volunteer">
                        <label for="volunteer">Aurez-vous besoin de bénévoles ?</label>
                    </div>
                    <div>
                        <label class="switch">
                            <input type="checkbox" id="volunteer" name="volunteersNeed" th:checked="${registration.volunteersNeed}" />
                            <span class="slider round"></span>
                            <div class="switch_on">OUI</div>
                            <div class="switch_off">NON</div>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="comments">Ajouter un commentaire</label>
                    <textarea id="comments" class="form-control comments" name="comments" th:text="${registration.comments}"></textarea>
                </div>
                <div>
                    <div id="finalCost" class="registration_cost text-center mt-4" th:text="|Coût de l'inscription : ${#numbers.formatInteger(registration.registrationCost,2,'COMMA')} €|">Coût de l'inscription : 0 €</div>
                </div>
                <div class="form-group mt-4 mb-2 d-flex justify-content-center">

                    <button type="submit" id="submit-update" name="registration" class="btn btn-primary btn-update">Valider les modifications</button>
                </div>
            </form>
        </section>
        <hr class="col-6 my-5 mx-auto" />
        <section id="games">
            <div class="pcard"></div>
            <div class="container containerTitleStyle">
                <h2 class="col-sm-12 p-0 title">Mes jeux:</h2>
            </div>
            <div class="fluid-container">
                <div class="row justify-content-center">
                    <div class="card col-4 col-lg-2 ml-2 mr-2 mb-3 card-custom" th:each="gameRegistration : ${gamesRegistration}">
                        <div class="img-container d-flex justify-content-center imgContainerCustom">
                            <img class="card-img-top card-img-custom" th:if="${gameRegistration.picture !='' AND gameRegistration.picture !=null}" th:src="|..${gameRegistration.picture}|" alt="Card image cap">
                            <img class="card-img-top card-img-custom" th:unless="${gameRegistration.picture !='' AND gameRegistration.picture !=null}" th:src="@{${connectedUser.getProfilePicture()}}" alt="Card image cap">
                        </div>
                        <div class="card-body card-body-custom">
                            <p class="card-text card-text-custom" th:text="${gameRegistration.name}">Shadow of the darkness</p>
                            <div class="d-flex svgContainer justify-content-around align-items-center p-2">
                                <form method="POST" action="/deleteRegistrationGame" class="deleteUpdateSVG">
                                    <input type="hidden" name="registrationId" th:value="${registration.id}">
                                    <input type="hidden" name="gameRegistrationId" th:value="${gameRegistration.id}">
                                    <button type="submit" class="col-12 deleteButton">
                                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times-circle" class="svg-inline--fa fa-times-circle fa-w-16 deleteSVG" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                            <path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"></path>
                                        </svg>
                                    </button>
                                </form>
                                <svg aria-hidden="true" focusable="false" data-toggle="modal" th:data-target="|#form-${gameRegistration.id}" data-prefix="fas" data-icon="pencil-alt" class="svg-inline--fa fa-pencil-alt fa-w-16 deleteUpdateSVG" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                    <path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <!-- card add -->
                    <div class="card col-4 col-lg-2 ml-2 mr-2 mb-3 card-custom border-0" data-toggle="modal" data-target="#formCreate">
                        <div class="img-container d-flex flex-column justify-content-center align-item-center imgContainerCustom mx-auto mt-auto mb-auto">
                            <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus-circle" class="svg-inline--fa fa-plus-circle fa-w-16 card-img-top card-img-custom" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"></path>
                            </svg>
                            <p class="card-text text-center">Ajouter un jeux</p>
                        </div>
                    </div>
                </div>
            </div>
            <div th:replace="modaleModificationGame :: modaleModification"></div>
            <div th:replace="modaleCreateGame :: modaleCreation"></div>
        </section>
        <hr id="agents" class="col-6 my-5 mx-auto" />
		<section>
            <div class="container containerTitleStyle">
                <h2 class="col-sm-12 p-0 mb-5 title">Mes collaborateurs présents à l'évenement:</h2>
            </div>
            <div class="fluid-container">
                <div class="row justify-content-center col-sm-12 col-lg-7 mx-auto">
                    <div class="col-10 center-block">
                        <p>Ajouter ici les coordonnées des personnes de votre société (ou qui représenteront votre société) lors de la manifestation.</p>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered card-custom">
                            <thead class="theadAgent">
                                <tr>
                                    <th class="col-3" scope="col">Nom</th>
                                    <th class="col-3" scope="col">Prénom</th>
                                    <th class="col-2" scope="col">Téléphone</th>
                                    <th class="col-3" scope="col">Mail</th>
                                    <th class="col-1" scope="col">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <form method="POST" action="/addRegistrationAgent">
                                        <td><input class="form-control input-sm border-top-0 border-left-1 border-bottom-1 border-right-0" type="text" id="firstName" name="firstName" placeholder="Nom" required></td>
                                        <td><input class="form-control input-sm border-top-0 border-left-1 border-bottom-1 border-right-0" type="text" id="lastName" name="lastName" placeholder="Prénom"> </td>
                                        <td><input class="form-control input-sm border-top-0 border-left-1 border-bottom-1 border-right-0" type="tel" id="phone" name="phone" placeholder="Téléphone"> </td>
                                        <td><input class="form-control input-sm border-top-0 border-left-1 border-bottom-1 border-right-0" type="email" id="email" name="mail" placeholder="Email"> </td>
                                        <input type="hidden" name="registrationId" th:value="${registration.id}">
                                        <input type="hidden" name="societyId" th:value="${society.id}">
                                        <td class="text-center align-middle">
                                            <button type="submit" class="svgActionAgent">
                                                <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus-circle" class="svg-inline--fa fa-plus-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                    <path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"></path>
                                                </svg>
                                            </button>
                                        </td>
                                    </form>
                                </tr>
                                <tr th:each="agentRegistration : ${agentsRegistration}">
                                    <form method="POST" action="/deleteRegistrationAgent">
                                        <input type="hidden" name="registrationId" th:value="${registration.id}">
                                        <input type="hidden" name="agentRegistrationId" th:value="${agentRegistration.id}">
                                        <td th:text="${agentRegistration.firstName}"></td>
                                        <td th:text="${agentRegistration.lastName}"></td>
                                        <td th:text="${agentRegistration.phone}"> </td>
                                        <td th:text="${agentRegistration.mail}"></td>
                                        <td class="text-center align-middle">
                                            <button type="submit" class="svgActionAgentDelete">
                                                <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times-circle" class="svg-inline--fa fa-times-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                    <path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"></path>
                                                </svg>
                                            </button>
                                        </td>
                                    </form>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center mt-5 mb-2">
            	<a class="col-6 col-lg-1 align-items-center editRegPageBackLink" href="/accueil_editeur"><button type="button" class="btn btn-primary returnBtn">RETOUR</button></a>
            </div>
        </section>
        <div th:replace="toasts :: toats"></div>
    </main>
    <footer th:replace="footer :: bottom"></footer>
    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="../JS/updateEditorRegistration.js"></script>
    <script src="../JS/picturePreview.js"></script>
    <script src="../JS/updateEditorRegistration.js"></script>
    <script src="../JS/main.js"></script>
</body>

</html>